# å¾®åšèˆ†æƒ…åˆ†æå¯è§†åŒ–ç³»ç»Ÿ

åŸºäº Python (Flask) + Vue (Vite) çš„è½»é‡çº§å¾®åšèˆ†æƒ…åˆ†æç³»ç»Ÿï¼Œæä¾›æ•°æ®é‡‡é›†ã€åŸºäºæƒ…æ„Ÿè¯åº“çš„æƒ…æ„Ÿåˆ†æã€æ•°æ®å¯è§†åŒ–ç­‰ç»¼åˆä»ªè¡¨ç›˜åŠŸèƒ½ã€‚

>**ğŸ’¡ æ¶æ„ç®€åŒ–è¯´æ˜**ï¼šæœ¬é¡¹ç›®å·²äºè¿‘æœŸç§»é™¤å¯¹ Redis å’Œ Celery çš„å¤–éƒ¨å¼ºåˆ¶ä¾èµ–ï¼Œç›®å‰æ”¯æŒæç®€çš„æœ¬åœ°å•è¿›ç¨‹ä¸€é”®å¯åŠ¨ï¼ˆæ— ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶æ†ç»‘ï¼‰ã€‚

## ğŸ“ æ ¸å¿ƒé¡¹ç›®ç»“æ„

```
åŸºäºpythonå¾®åšèˆ†æƒ…åˆ†æå¯è§†åŒ–ç³»ç»Ÿ/
â”œâ”€â”€ src/                        # åç«¯æºä»£ç 
â”‚   â”œâ”€â”€ app.py                  # Flask åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ database.py             # æ•°æ®åº“è¿æ¥
â”‚   â”œâ”€â”€ config/                 # é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ settings.py         # åº”ç”¨é…ç½®
â”‚   â”œâ”€â”€ model/                  # æƒ…æ„Ÿåˆ†ææ¨¡å‹ï¼ˆè®­ç»ƒ/æ¨ç†ï¼‰
â”‚   â”‚   â”œâ”€â”€ trainModel.py       # æ¨¡å‹è®­ç»ƒ
â”‚   â”‚   â”œâ”€â”€ model_pipeline.py   # æ¨¡å‹æµæ°´çº¿
â”‚   â”‚   â”œâ”€â”€ model_utils.py      # æ¨¡å‹å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ hyperparameter_optimizer.py  # è¶…å‚æ•°ä¼˜åŒ–
â”‚   â”‚   â”œâ”€â”€ data_augmentation.py         # æ•°æ®å¢å¼º
â”‚   â”‚   â””â”€â”€ yuqing.py           # èˆ†æƒ…åˆ†æå…¥å£
â”‚   â”œâ”€â”€ models/                 # ORM æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ alert.py            # é¢„è­¦æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ article.py          # æ–‡ç« æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ comment.py          # è¯„è®ºæ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ platform.py         # å¹³å°æ¨¡å‹
â”‚   â”‚   â””â”€â”€ user.py             # ç”¨æˆ·æ¨¡å‹
â”‚   â”œâ”€â”€ repositories/           # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”œâ”€â”€ base_repository.py  # åŸºç¡€ä»“åº“
â”‚   â”‚   â”œâ”€â”€ article_repository.py  # æ–‡ç« ä»“åº“
â”‚   â”‚   â”œâ”€â”€ comment_repository.py  # è¯„è®ºä»“åº“
â”‚   â”‚   â””â”€â”€ user_repository.py     # ç”¨æˆ·ä»“åº“
â”‚   â”œâ”€â”€ services/               # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ alert_service.py        # é¢„è­¦æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ alert_history_service.py # é¢„è­¦å†å²æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ article_service.py      # æ–‡ç« æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ audit_service.py        # å®¡è®¡æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ auth_service.py         # è®¤è¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ collaboration_service.py # åä½œæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ comment_service.py      # è¯„è®ºæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ notification_service.py # é€šçŸ¥æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ platform_collector.py   # å¹³å°æ•°æ®é‡‡é›†
â”‚   â”‚   â”œâ”€â”€ propagation_analyzer.py # ä¼ æ’­åˆ†æ
â”‚   â”‚   â”œâ”€â”€ propagation_service.py  # ä¼ æ’­æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ search_service.py       # æœç´¢æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ sentiment_monitor.py    # æƒ…æ„Ÿç›‘æ§
â”‚   â”‚   â”œâ”€â”€ sentiment_service.py    # æƒ…æ„Ÿåˆ†ææœåŠ¡
â”‚   â”‚   â””â”€â”€ websocket_service.py    # WebSocket æœåŠ¡
â”‚   â”œâ”€â”€ tasks/                  # å¼‚æ­¥ä»»åŠ¡ï¼ˆCeleryï¼‰
â”‚   â”‚   â”œâ”€â”€ celery_config.py    # Celery é…ç½®
â”‚   â”‚   â”œâ”€â”€ celery_sentiment.py # æƒ…æ„Ÿåˆ†æä»»åŠ¡
â”‚   â”‚   â””â”€â”€ celery_spider.py    # çˆ¬è™«ä»»åŠ¡
â”‚   â”œâ”€â”€ spider/                 # å¾®åšçˆ¬è™«æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ spiderContent.py    # æ–‡ç« çˆ¬è™«
â”‚   â”‚   â”œâ”€â”€ spiderComments.py   # è¯„è®ºçˆ¬è™«
â”‚   â”‚   â”œâ”€â”€ spiderMaster.py     # çˆ¬è™«ä¸»æ§
â”‚   â”‚   â”œâ”€â”€ spiderNav.py        # å¯¼èˆªçˆ¬è™«
â”‚   â”‚   â”œâ”€â”€ spiderUserInfo.py   # ç”¨æˆ·ä¿¡æ¯çˆ¬è™«
â”‚   â”‚   â”œâ”€â”€ proxy_fetcher.py    # ä»£ç†è·å–
â”‚   â”‚   â””â”€â”€ config.py           # çˆ¬è™«é…ç½®
â”‚   â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ api_response.py     # ç»Ÿä¸€å“åº”æ ¼å¼
â”‚   â”‚   â”œâ”€â”€ authz.py            # æƒé™æ ¡éªŒ
â”‚   â”‚   â”œâ”€â”€ cache.py            # ç¼“å­˜ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ chart_renderer.py   # å›¾è¡¨æ¸²æŸ“
â”‚   â”‚   â”œâ”€â”€ constants.py        # å¸¸é‡å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ deduplicator.py     # æ•°æ®å»é‡
â”‚   â”‚   â”œâ”€â”€ encryption.py       # åŠ å¯†å·¥å…·
â”‚   â”‚   â”œâ”€â”€ getEchartsData.py   # å›¾è¡¨æ•°æ®å¤„ç†
â”‚   â”‚   â”œâ”€â”€ getHomeData.py      # é¦–é¡µæ•°æ®å¤„ç†
â”‚   â”‚   â”œâ”€â”€ getTableData.py     # è¡¨æ ¼æ•°æ®å¤„ç†
â”‚   â”‚   â”œâ”€â”€ input_validator.py  # è¾“å…¥æ ¡éªŒ
â”‚   â”‚   â”œâ”€â”€ jwt_handler.py      # JWT å¤„ç†
â”‚   â”‚   â”œâ”€â”€ log_sanitizer.py    # æ—¥å¿—è„±æ•
â”‚   â”‚   â”œâ”€â”€ pagination.py       # åˆ†é¡µå·¥å…·
â”‚   â”‚   â”œâ”€â”€ password_hasher.py  # å¯†ç å“ˆå¸Œ
â”‚   â”‚   â”œâ”€â”€ query.py            # æ•°æ®åº“æŸ¥è¯¢
â”‚   â”‚   â”œâ”€â”€ rate_limiter.py     # é™æµå·¥å…·
â”‚   â”‚   â”œâ”€â”€ report_generator.py # æŠ¥å‘Šç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ sentiment.py        # æƒ…æ„Ÿå·¥å…·
â”‚   â”‚   â””â”€â”€ websocket_server.py # WebSocket æœåŠ¡ç«¯
â”‚   â”œâ”€â”€ views/                  # è§†å›¾/è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ api/                # REST API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ api.py          # é€šç”¨ API
â”‚   â”‚   â”‚   â”œâ”€â”€ alert_api.py    # é¢„è­¦æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ audit_api.py    # å®¡è®¡æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ favorites_api.py # æ”¶è—æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ platform_api.py # å¹³å°æ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ propagation_api.py # ä¼ æ’­åˆ†ææ¥å£
â”‚   â”‚   â”‚   â”œâ”€â”€ report_api.py   # æŠ¥å‘Šæ¥å£
â”‚   â”‚   â”‚   â””â”€â”€ spider_api.py   # çˆ¬è™«æ§åˆ¶æ¥å£
â”‚   â”‚   â”œâ”€â”€ data/               # æ•°æ® API
â”‚   â”‚   â”‚   â””â”€â”€ data_api.py     # æ•°æ®æ¥å£
â”‚   â”‚   â”œâ”€â”€ page/               # é¡µé¢è·¯ç”±
â”‚   â”‚   â””â”€â”€ user/               # ç”¨æˆ·è®¤è¯
â”‚   â”œâ”€â”€ static/                 # é™æ€èµ„æº
â”‚   â”œâ”€â”€ templates/              # HTML æ¨¡æ¿
â”‚   â””â”€â”€ cache/                  # è¿è¡Œæ—¶ç¼“å­˜ç›®å½•
â”œâ”€â”€ frontend/                   # å‰ç«¯ Vue é¡¹ç›®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/                # API æ¥å£
â”‚   â”‚   â”œâ”€â”€ views/              # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ components/         # å…¬å…±ç»„ä»¶
â”‚   â”‚   â””â”€â”€ router/             # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.js
â”œâ”€â”€ docs/                       # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ scripts/                    # è¿ç»´è„šæœ¬
â”œâ”€â”€ tests/                      # æµ‹è¯•ç”¨ä¾‹
â”œâ”€â”€ data/                       # æ•°æ®æ–‡ä»¶ç›®å½•
â”œâ”€â”€ cache/                      # ç¼“å­˜ç›®å½•
â”œâ”€â”€ logs/                       # æ—¥å¿—ç›®å½•
â”œâ”€â”€ run.py                      # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ requirements.txt            # Python ä¾èµ–
â”œâ”€â”€ requirements-dev.txt        # å¼€å‘ä¾èµ–
â”œâ”€â”€ pyproject.toml              # å·¥å…·é…ç½®
â”œâ”€â”€ .editorconfig               # ç¼–è¾‘å™¨é…ç½®
â”œâ”€â”€ .pre-commit-config.yaml     # Git Hooks
â”œâ”€â”€ .gitignore                  # Git å¿½ç•¥é…ç½®
â””â”€â”€ .env.example                # ç¯å¢ƒå˜é‡ç¤ºä¾‹
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Python** 3.8 - 3.12 
- **Node.js** 16+
- **MySQL** 5.7+ (æ¨èï¼Œä½†ä¹Ÿæ”¯æŒè°ƒæ•´ SQLAlchemy è¿æ¥ä»»ä½•é€šç”¨åº“)

### ğŸ’» Windows ä¸€é”®å¯åŠ¨ (æ¨è)

å¦‚æœä½ åœ¨ Windows ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬åœ¨æ ¹ç›®å½•æä¾›äº†ä¸€ä¸ªéå¸¸ç®€å•çš„è‡ªåŠ¨åŒ–è„šæœ¬ï¼š

```powershell
# 1. ç¡®ä¿ MySQL å·²è¿è¡Œï¼Œå¹¶ä¸”å·²ç»å¯¼å…¥äº†æ ¹ç›®å½•ä¸‹ /database ä¸­çš„ sql æ•°æ®è¡¨
# 2. ç¡®ä¿åœ¨ `.env` ä¸­æŒ‰ `.env.example` å¡«å¥½äº†æ•°æ®åº“å¯†ç ã€‚

# 3. ç›´æ¥åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
.\start.bat
```
`start.bat` ä¼šè‡ªåŠ¨ä¸ºä½ åŒæ—¶æ‹‰èµ· Flask åç«¯ï¼ˆ5000 ç«¯å£ï¼‰å’Œ Vite å‰ç«¯ï¼ˆ3000 ç«¯å£ï¼‰ã€‚è¦åœæ­¢æœåŠ¡ï¼Œåªéœ€è¿è¡Œï¼š`.\start.bat stop`ã€‚

### ğŸ› ï¸ æ‰‹åŠ¨åˆ†æ­¥å¯åŠ¨

**1. åç«¯ (Flask)**
```bash
# æ¿€æ´»ç¯å¢ƒå¹¶å®‰è£…ä¾èµ–
pip install -r requirements.txt
cp .env.example .env  # è®°å¾—é…ç½®æ•°æ®åº“å¯†ç é…ç½®

# è¿è¡Œåç«¯
python run.py
# æœåŠ¡å°†è¿è¡Œåœ¨ http://127.0.0.1:5000
```

**2. å‰ç«¯ (Vite/Vue)**
```bash
cd frontend
npm install
npm run dev
# æµè§ˆå™¨è®¿é—® http://localhost:3000
```

## ä¸»è¦åŠŸèƒ½

### æ•°æ®é‡‡é›†
- å¾®åšæ–‡ç« çˆ¬å–
- è¯„è®ºæ•°æ®é‡‡é›†
- ç”¨æˆ·ä¿¡æ¯è·å–

### æ•°æ®åˆ†æ
- æƒ…æ„Ÿåˆ†æï¼ˆæ­£é¢/ä¸­æ€§/è´Ÿé¢ï¼‰
- çƒ­è¯æå–
- åœ°åŸŸåˆ†å¸ƒåˆ†æ
- æ—¶é—´è¶‹åŠ¿åˆ†æ

### æ•°æ®å¯è§†åŒ–
- é¦–é¡µæ•°æ®æ¦‚è§ˆ
- çƒ­è¯åˆ†æ
- æ–‡ç« åˆ†æ
- è¯„è®ºåˆ†æ
- IP åœ°åŸŸåˆ†å¸ƒ
- èˆ†æƒ…è¶‹åŠ¿
- è¯äº‘å±•ç¤º

## API æ¥å£

æ‰€æœ‰æ•°æ®æ¥å£ç»Ÿä¸€è¿”å›æ ¼å¼ï¼š

```json
{
  "code": 200,
  "msg": "success",
  "data": { ... }
}
```

### æ•°æ®æ¥å£åˆ—è¡¨

| æ¥å£ | è¯´æ˜ | ç¼“å­˜æ—¶é—´ |
|------|------|----------|
| `GET /getAllData/getHomeData` | é¦–é¡µæ•°æ® | 5åˆ†é’Ÿ |
| `GET /getAllData/getTableData` | è¡¨æ ¼æ•°æ® | 3åˆ†é’Ÿ |
| `GET /getAllData/getArticleData` | æ–‡ç« åˆ†æ | 10åˆ†é’Ÿ |
| `GET /getAllData/getCommentData` | è¯„è®ºåˆ†æ | 5åˆ†é’Ÿ |
| `GET /getAllData/getIPData` | IP åˆ†å¸ƒ | 10åˆ†é’Ÿ |
| `GET /getAllData/getYuqingData` | èˆ†æƒ…åˆ†æ | 5åˆ†é’Ÿ |
| `GET /getAllData/getContentCloudData` | è¯äº‘æ•°æ® | 30åˆ†é’Ÿ |
| `POST /getAllData/clearCache` | æ¸…ç©ºç¼“å­˜ | - |

## å¼€å‘è§„èŒƒ

### ä»£ç æ ¼å¼åŒ–

```bash
# å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements-dev.txt

# è®¾ç½® pre-commit hooks
pre-commit install

# æ‰‹åŠ¨æ ¼å¼åŒ–ä»£ç 
black src/ tests/
isort src/ tests/

# ä»£ç æ£€æŸ¥
ruff check src/
```

### é¡¹ç›®é…ç½®

- **Black**: ä»£ç æ ¼å¼åŒ–
- **isort**: import æ’åº
- **Ruff**: å¿«é€Ÿä»£ç æ£€æŸ¥

è¯¦è§ [docs/CODING_STANDARDS.md](docs/CODING_STANDARDS.md)

## ğŸ­ ç”Ÿäº§éƒ¨ç½²

ç”Ÿäº§éƒ¨ç½²æˆ‘ä»¬æ¨èä½¿ç”¨ `Gunicorn` æˆ– `uWSGI` æŒ‚è½½ Flask åç«¯ï¼Œä½¿ç”¨ `Nginx` ä»£ç†ç¼–è¯‘åçš„é™æ€å‰ç«¯æ–‡ä»¶ã€‚

è¯¦ç»†ç»†èŠ‚è¯·è§ä¸“é—¨çš„è¯´æ˜æ–‡ä»¶ï¼š[éƒ¨ç½²æŒ‡å—æ–‡æ¡£ docs/DEPLOYMENT.md](docs/DEPLOYMENT.md)

## ğŸ“ ç›®å½•è¯´æ˜

### æ•°æ®ç›®å½•

- `data/` - æ•°æ®æ–‡ä»¶å­˜å‚¨
- `src/data/` - åº”ç”¨æ•°æ®æ–‡ä»¶
- `cache/` - è¿è¡Œæ—¶ç¼“å­˜
- `logs/` - åº”ç”¨æ—¥å¿—

### ç¼“å­˜ç­–ç•¥

- å†…å­˜ç¼“å­˜: ä½¿ç”¨ `utils/cache.py` å®ç°
- ç¼“å­˜æ—¶é—´: æ ¹æ®æ•°æ®æ›´æ–°é¢‘ç‡è®¾ç½® 3-30 åˆ†é’Ÿ
- ç¼“å­˜æ¸…ç†: é€šè¿‡ `/getAllData/clearCache` æ¥å£æ‰‹åŠ¨æ¸…ç†

## è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## è®¸å¯è¯

[MIT License](LICENSE.md)

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿æäº¤ Issue æˆ– Pull Requestã€‚
